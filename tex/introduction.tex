\section{Introduction}
The software-to-hardware allocation is a very important step during the development of automotive embedded systems. Basically, it allows the designer to explore system-level solutions that meet functional and extra-functional software requirements together with resource availability on the execution platform. Software allocation is a well-researched area in the domain of embedded systems, including in hardware/software co-design \cite{Wolf2003ACodesign}, platform-based system design \cite{Sangiovanni-Vincentelli2004BenefitsDesign} and the Y-chart design approach \cite{ychart_Kienhuis2002}. It is a type of bin-packing problem, and therefore finding an optimal solution, in the general case, is  NP-hard \cite{Fernandez-Baca1989AllocatingSystem}. The methods to solve such problems can be exact \cite{Saidi2015AnArchitectures}, which means solutions are guaranteed to be optimal, or heuristic, which deliver near-optimal solutions \cite{faragardi2018AECUs}\cite{Bucaioni2018MoVES:Systems}. Exact methods such as Integer Linear Programming (ILP) \cite{Bradley1977AppliedProgramming} have been used widely in several resource optimization problems. In contrast to heuristic methods, ILP returns optimal solutions faster for relatively small problems \cite{Wozniak2013AnArchitectures}. However, many problems in real-time systems are nonlinear by nature \cite{Fernandez2014SystemApproach}, e.g., response time of cause-effect actions, system reliability, etc. To benefit from linear optimization techniques, non-linear functions are approximated using \textit{Linearization} - a widely-used technique in the optimization of non-linear problems.

In case of fault-tolerance with replication \cite{Kopetz1989DistributedApproach}, the search space to find the optimal allocation is increased due to the replicas. The search space becomes even larger if we assume that the real-time system executes over different sampling rates, known as \textit{multirate}~\cite{Vinet2010APolynomials}, in which case the feasible (timed) paths that pass through the different sampling points (or activation patterns) increase exponentially with the number of activation patterns increase . Furthermore, due to the different sampling rates that result in oversampling and undersampling effects, the timing analysis of signals propagation is complex \cite{mubeen2013support}. Existing methods of software allocation lack exact results for the timing analysis of multirate systems.

In this paper, we propose an allocation scheme based on ILP for relatively small- and medium-sized fault-tolerant distributed applications, with the number of allocatable components not exceeding 15, operating-system tasks less than 100, and cause-effect chains in the range of 30 to 60. These parameters are deducted from the real-world automotive benchmark~\cite{Kramer2015RealFree}, and from previous experience in developing automotive systems and experiments. The applications are distributed over heterogeneous computing units that share a single network. The allocation aims for minimizing the total power consumption of the system while meeting timing and reliability requirements. Our proposed solution targets the automotive domain, in particular systems that conform to the AUTomotive Open System ARchitecture (AUTOSAR) standard. In comparison to related work~\cite{Wozniak2013AnArchitectures}\cite{vsvogor2014extended}\cite{Saidi2015AnArchitectures}, we consider a fault-tolerant and multirate system model. Furthermore, we follow a highly integrated approach in the allocation process, which includes response-time analysis (RTA), and utilization bound checking (UB), as well as bounding the level of fault tolerance via the imposed reliability requirement on the application. The main contributions of our work are: i) an ILP model for the allocation of a fault-tolerant multirate application on heterogeneous nodes with the objective of minimizing the total power consumption, and ii) an approach for reducing overhead of replications and cause-effect chains on the allocation of such applications.

Our approach is evaluated on synthetic automotive applications that are generated according to the real-world automotive benchmark proposed by Kramer et al. \cite{Kramer2015RealFree}. In the evaluation, we show the performance of our proposed approach in terms of allocation time and resource efficiency with respect to the size of applications. The tool and the synthetic applications used in this experiment are publicly available from BitBucket\footnote{\url{https://bitbucket.org/nasmdh/archsynapp/src/master/}}. 

The rest of the paper is organized as follows. Section~\ref{sec_autosar} provides a brief overview of AUTOSAR-based software development, emphasizing the role of software allocation. Section~\ref{sec_system} describes the system model, and Section~\ref{sec_extrafunc} describes the extra-functional models including the timing, reliability, and power consumption models. Section~\ref{sec_allocation} presents the proposed allocation scheme, and in Section~\ref{sec_evaluation}, we provide an evaluation of the proposed approach using the automotive benchmark. In Section~\ref{sec_RW}, we compare to related work. Finally, we conclude the paper in Section~\ref{sec_conclusion}, and outline the possible future work.

